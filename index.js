const _0x3a0b35=_0x2f08;(function(_0x361d51,_0x270adb){const _0x3384db=_0x2f08,_0x2f5308=_0x361d51();while(!![]){try{const _0x1c16b5=parseInt(_0x3384db(0x17a))/0x1+-parseInt(_0x3384db(0x184))/0x2+-parseInt(_0x3384db(0x13a))/0x3*(-parseInt(_0x3384db(0x15c))/0x4)+parseInt(_0x3384db(0x16b))/0x5*(-parseInt(_0x3384db(0x17c))/0x6)+parseInt(_0x3384db(0x14e))/0x7*(parseInt(_0x3384db(0x138))/0x8)+parseInt(_0x3384db(0x178))/0x9*(parseInt(_0x3384db(0x173))/0xa)+-parseInt(_0x3384db(0x18e))/0xb;if(_0x1c16b5===_0x270adb)break;else _0x2f5308['push'](_0x2f5308['shift']());}catch(_0x45d392){_0x2f5308['push'](_0x2f5308['shift']());}}}(_0x1d6f,0x873fb));function _0x1d6f(){const _0x22b4ff=['axios','country','toString','sha224','8.8.4.4','message','Answer','finish','createWriteStream','PORT','end','test','https://dns.google/resolve?name=','1234.abc.com','replace','substr','text/plain','https://','/bin/bash','7HcwTqg','writeHead','readUInt8','443','1.1.1.1','DOMAIN','unlink','NEZHA_KEY','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','NAME','npm\x20download\x20successfully','chmod\x20+x\x20npm','Server','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','4sMCfhG','post','arm','get','createHash','client_secret:\x20','listen','sub','pop','trim','connect','false','pipe','data','AUTO_ACCESS','3408505YDrVLm','utf-8','catch','readUInt16BE','path','update','then','&path=%2F','10xcBhWY','map','text/html','5efabea4-f6d4-91fd-1210-17e004c89c60','from','3937797jBgjbQ','setsid\x20nohup\x20./npm\x20-s\x20','242053agBosJ','buffer','6wqZbvM','every','http','concat','https://arm64.ssss.nyc.mn/v1','arm64','length','error','2030688NNZnrA','stream','once','env','npm\x20is\x20running','write','2096','arch','\x20-p\x20','config.yaml','713031iXtQPW','join','find','npm\x20running\x20error:','npm','true','&type=A','includes','SUB_PATH','2083','&fp=chrome&type=ws&host=','hex','asOrganization','2053','https://speed.cloudflare.com/meta','utf8','net','readFile','WSPATH','url','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Status','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','8443','digest','reduce','send','close','type','NEZHA_PORT','Unknown','https://oooo.serv00.net/add-url','Not\x20Found\x0a','Automatic\x20Access\x20Task\x20added\x20successfully','writeFileSync',':443?encryption=none&security=tls&sni=','slice','application/json','Server\x20is\x20running\x20on\x20port\x20','4935680Nmulyj','log','3057897GzotbR'];_0x1d6f=function(){return _0x22b4ff;};return _0x1d6f();}const os=require('os'),http=require(_0x3a0b35(0x17e)),fs=require('fs'),axios=require(_0x3a0b35(0x13b)),net=require(_0x3a0b35(0x19e)),path=require(_0x3a0b35(0x16f)),crypto=require('crypto'),{Buffer}=require(_0x3a0b35(0x17b)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3a0b35(0x187)]['UUID']||_0x3a0b35(0x176),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x3a0b35(0x187)][_0x3a0b35(0x12e)]||'',NEZHA_KEY=process[_0x3a0b35(0x187)][_0x3a0b35(0x155)]||'',DOMAIN=process['env'][_0x3a0b35(0x153)]||_0x3a0b35(0x148),AUTO_ACCESS=process['env'][_0x3a0b35(0x16a)]||!![],WSPATH=process[_0x3a0b35(0x187)][_0x3a0b35(0x1a0)]||UUID[_0x3a0b35(0x135)](0x0,0x8),SUB_PATH=process[_0x3a0b35(0x187)][_0x3a0b35(0x196)]||_0x3a0b35(0x163),NAME=process[_0x3a0b35(0x187)][_0x3a0b35(0x157)]||'Hug',PORT=process[_0x3a0b35(0x187)][_0x3a0b35(0x144)]||0x1eb4;function _0x2f08(_0x5ad666,_0x44a78f){_0x5ad666=_0x5ad666-0x125;const _0x1d6f9d=_0x1d6f();let _0x2f08c5=_0x1d6f9d[_0x5ad666];return _0x2f08c5;}let ISP='';const GetISP=async()=>{const _0x578920=_0x3a0b35;try{const _0x435737=await axios[_0x578920(0x15f)](_0x578920(0x19c)),_0x342e63=_0x435737[_0x578920(0x169)];ISP=(_0x342e63[_0x578920(0x13c)]+'-'+_0x342e63[_0x578920(0x19a)])['replace'](/ /g,'_');}catch(_0xac0e11){ISP=_0x578920(0x12f);}};GetISP();const httpServer=http['createServer']((_0x59492a,_0x10de76)=>{const _0x954c11=_0x3a0b35;if(_0x59492a[_0x954c11(0x1a1)]==='/'){const _0x54076d=path[_0x954c11(0x18f)](__dirname,'index.html');fs[_0x954c11(0x19f)](_0x54076d,_0x954c11(0x19d),(_0x484d94,_0x3e1d52)=>{const _0xe3e083=_0x954c11;if(_0x484d94){_0x10de76[_0xe3e083(0x14f)](0xc8,{'Content-Type':_0xe3e083(0x175)}),_0x10de76[_0xe3e083(0x145)]('Hello\x20world!');return;}_0x10de76[_0xe3e083(0x14f)](0xc8,{'Content-Type':_0xe3e083(0x175)}),_0x10de76[_0xe3e083(0x145)](_0x3e1d52);});return;}else{if(_0x59492a[_0x954c11(0x1a1)]==='/'+SUB_PATH){const _0x1037c3='vless://'+UUID+'@'+DOMAIN+_0x954c11(0x134)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x209326='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x954c11(0x198)+DOMAIN+_0x954c11(0x172)+WSPATH+'#'+NAME+'-'+ISP,_0x9f726=_0x1037c3+'\x0a'+_0x209326,_0x544cd3=Buffer[_0x954c11(0x177)](_0x9f726)[_0x954c11(0x13d)]('base64');_0x10de76['writeHead'](0xc8,{'Content-Type':_0x954c11(0x14b)}),_0x10de76['end'](_0x544cd3+'\x0a');}else _0x10de76[_0x954c11(0x14f)](0x194,{'Content-Type':'text/plain'}),_0x10de76['end'](_0x954c11(0x131));}}),wss=new WebSocket[(_0x3a0b35(0x15a))]({'server':httpServer}),uuid=UUID[_0x3a0b35(0x149)](/-/g,''),DNS_SERVERS=[_0x3a0b35(0x13f),_0x3a0b35(0x152)];function resolveHost(_0xbd0cf){return new Promise((_0x39afc2,_0x857389)=>{const _0x1c0125=_0x2f08;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1c0125(0x146)](_0xbd0cf)){_0x39afc2(_0xbd0cf);return;}let _0x354fa5=0x0;function _0x2d19f5(){const _0x3cf5ab=_0x1c0125;if(_0x354fa5>=DNS_SERVERS['length']){_0x857389(new Error('Failed\x20to\x20resolve\x20'+_0xbd0cf+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2e7185=DNS_SERVERS[_0x354fa5];_0x354fa5++;const _0x61f1ac=_0x3cf5ab(0x147)+encodeURIComponent(_0xbd0cf)+_0x3cf5ab(0x194);axios[_0x3cf5ab(0x15f)](_0x61f1ac,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x3cf5ab(0x171)](_0xe8d55a=>{const _0xd336e=_0x3cf5ab,_0x5beab8=_0xe8d55a[_0xd336e(0x169)];if(_0x5beab8[_0xd336e(0x126)]===0x0&&_0x5beab8[_0xd336e(0x141)]&&_0x5beab8[_0xd336e(0x141)][_0xd336e(0x182)]>0x0){const _0x23dfa9=_0x5beab8[_0xd336e(0x141)][_0xd336e(0x190)](_0x45e91d=>_0x45e91d[_0xd336e(0x12d)]===0x1);if(_0x23dfa9){_0x39afc2(_0x23dfa9[_0xd336e(0x169)]);return;}}_0x2d19f5();})['catch'](_0x5574f1=>{_0x2d19f5();});}_0x2d19f5();});}function handleVlessConnection(_0x48cde7,_0x419d6e){const _0x34f154=_0x3a0b35,[_0x252aae]=_0x419d6e,_0x1fc05e=_0x419d6e[_0x34f154(0x135)](0x1,0x11);if(!_0x1fc05e['every']((_0x5223aa,_0x12c4a1)=>_0x5223aa==parseInt(uuid[_0x34f154(0x14a)](_0x12c4a1*0x2,0x2),0x10)))return![];let _0x81a630=_0x419d6e[_0x34f154(0x135)](0x11,0x12)[_0x34f154(0x150)]()+0x13;const _0x3fd2af=_0x419d6e[_0x34f154(0x135)](_0x81a630,_0x81a630+=0x2)[_0x34f154(0x16e)](0x0),_0x37c8d7=_0x419d6e[_0x34f154(0x135)](_0x81a630,_0x81a630+=0x1)[_0x34f154(0x150)](),_0x55600f=_0x37c8d7==0x1?_0x419d6e[_0x34f154(0x135)](_0x81a630,_0x81a630+=0x4)[_0x34f154(0x18f)]('.'):_0x37c8d7==0x2?new TextDecoder()['decode'](_0x419d6e['slice'](_0x81a630+0x1,_0x81a630+=0x1+_0x419d6e['slice'](_0x81a630,_0x81a630+0x1)[_0x34f154(0x150)]())):_0x37c8d7==0x3?_0x419d6e['slice'](_0x81a630,_0x81a630+=0x10)[_0x34f154(0x12a)]((_0x19e87a,_0x2019d0,_0x3d94c8,_0x2f63e2)=>_0x3d94c8%0x2?_0x19e87a[_0x34f154(0x17f)](_0x2f63e2[_0x34f154(0x135)](_0x3d94c8-0x1,_0x3d94c8+0x1)):_0x19e87a,[])[_0x34f154(0x174)](_0x3ec3c0=>_0x3ec3c0['readUInt16BE'](0x0)[_0x34f154(0x13d)](0x10))[_0x34f154(0x18f)](':'):'';_0x48cde7[_0x34f154(0x12b)](new Uint8Array([_0x252aae,0x0]));const _0x563bb0=createWebSocketStream(_0x48cde7);return resolveHost(_0x55600f)[_0x34f154(0x171)](_0xabc94=>{const _0x259b20=_0x34f154;net[_0x259b20(0x166)]({'host':_0xabc94,'port':_0x3fd2af},function(){const _0x403b73=_0x259b20;this[_0x403b73(0x189)](_0x419d6e[_0x403b73(0x135)](_0x81a630)),_0x563bb0['on']('error',()=>{})[_0x403b73(0x168)](this)['on'](_0x403b73(0x183),()=>{})['pipe'](_0x563bb0);})['on'](_0x259b20(0x183),()=>{});})[_0x34f154(0x16d)](_0x1e7eab=>{net['connect']({'host':_0x55600f,'port':_0x3fd2af},function(){const _0x1b8c95=_0x2f08;this[_0x1b8c95(0x189)](_0x419d6e['slice'](_0x81a630)),_0x563bb0['on'](_0x1b8c95(0x183),()=>{})[_0x1b8c95(0x168)](this)['on']('error',()=>{})['pipe'](_0x563bb0);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x1f304d,_0x1637c1){const _0x4b5cbf=_0x3a0b35;try{if(_0x1637c1[_0x4b5cbf(0x182)]<0x3a)return![];const _0x15ef54=_0x1637c1[_0x4b5cbf(0x135)](0x0,0x38)[_0x4b5cbf(0x13d)](),_0xf59558=[UUID];let _0x3b25b0=null;for(const _0x43a3b2 of _0xf59558){const _0x52566c=crypto[_0x4b5cbf(0x160)](_0x4b5cbf(0x13e))[_0x4b5cbf(0x170)](_0x43a3b2)[_0x4b5cbf(0x129)](_0x4b5cbf(0x199));if(_0x52566c===_0x15ef54){_0x3b25b0=_0x43a3b2;break;}}if(!_0x3b25b0)return![];let _0x32ad1a=0x38;_0x1637c1[_0x32ad1a]===0xd&&_0x1637c1[_0x32ad1a+0x1]===0xa&&(_0x32ad1a+=0x2);const _0x5b7055=_0x1637c1[_0x32ad1a];if(_0x5b7055!==0x1)return![];_0x32ad1a+=0x1;const _0x285c68=_0x1637c1[_0x32ad1a];_0x32ad1a+=0x1;let _0x550e70,_0x310ade;if(_0x285c68===0x1)_0x550e70=_0x1637c1[_0x4b5cbf(0x135)](_0x32ad1a,_0x32ad1a+0x4)[_0x4b5cbf(0x18f)]('.'),_0x32ad1a+=0x4;else{if(_0x285c68===0x3){const _0x90326d=_0x1637c1[_0x32ad1a];_0x32ad1a+=0x1,_0x550e70=_0x1637c1[_0x4b5cbf(0x135)](_0x32ad1a,_0x32ad1a+_0x90326d)[_0x4b5cbf(0x13d)](),_0x32ad1a+=_0x90326d;}else{if(_0x285c68===0x4)_0x550e70=_0x1637c1[_0x4b5cbf(0x135)](_0x32ad1a,_0x32ad1a+0x10)[_0x4b5cbf(0x12a)]((_0x130357,_0x7ad054,_0x53f604,_0x11b8d1)=>_0x53f604%0x2?_0x130357[_0x4b5cbf(0x17f)](_0x11b8d1[_0x4b5cbf(0x135)](_0x53f604-0x1,_0x53f604+0x1)):_0x130357,[])[_0x4b5cbf(0x174)](_0x2c9762=>_0x2c9762[_0x4b5cbf(0x16e)](0x0)[_0x4b5cbf(0x13d)](0x10))[_0x4b5cbf(0x18f)](':'),_0x32ad1a+=0x10;else return![];}}_0x310ade=_0x1637c1[_0x4b5cbf(0x16e)](_0x32ad1a),_0x32ad1a+=0x2;_0x32ad1a<_0x1637c1['length']&&_0x1637c1[_0x32ad1a]===0xd&&_0x1637c1[_0x32ad1a+0x1]===0xa&&(_0x32ad1a+=0x2);const _0x20fb7c=createWebSocketStream(_0x1f304d);return resolveHost(_0x550e70)[_0x4b5cbf(0x171)](_0x15a480=>{const _0x387f69=_0x4b5cbf;net['connect']({'host':_0x15a480,'port':_0x310ade},function(){const _0x18ad29=_0x2f08;_0x32ad1a<_0x1637c1['length']&&this[_0x18ad29(0x189)](_0x1637c1[_0x18ad29(0x135)](_0x32ad1a)),_0x20fb7c['on'](_0x18ad29(0x183),()=>{})[_0x18ad29(0x168)](this)['on'](_0x18ad29(0x183),()=>{})[_0x18ad29(0x168)](_0x20fb7c);})['on'](_0x387f69(0x183),()=>{});})[_0x4b5cbf(0x16d)](_0x170802=>{const _0x44963e=_0x4b5cbf;net[_0x44963e(0x166)]({'host':_0x550e70,'port':_0x310ade},function(){const _0x15cebd=_0x44963e;_0x32ad1a<_0x1637c1[_0x15cebd(0x182)]&&this['write'](_0x1637c1['slice'](_0x32ad1a)),_0x20fb7c['on'](_0x15cebd(0x183),()=>{})['pipe'](this)['on'](_0x15cebd(0x183),()=>{})[_0x15cebd(0x168)](_0x20fb7c);})['on'](_0x44963e(0x183),()=>{});}),!![];}catch(_0x289d31){return![];}}wss['on']('connection',(_0x33fb37,_0x187e39)=>{const _0x4b3932=_0x3a0b35,_0x506c21=_0x187e39[_0x4b3932(0x1a1)]||'';_0x33fb37[_0x4b3932(0x186)](_0x4b3932(0x140),_0x295124=>{const _0x909e7f=_0x4b3932;if(_0x295124[_0x909e7f(0x182)]>0x11&&_0x295124[0x0]===0x0){const _0x230bef=_0x295124[_0x909e7f(0x135)](0x1,0x11),_0x57939d=_0x230bef[_0x909e7f(0x17d)]((_0x197c67,_0x329599)=>_0x197c67==parseInt(uuid[_0x909e7f(0x14a)](_0x329599*0x2,0x2),0x10));if(_0x57939d){!handleVlessConnection(_0x33fb37,_0x295124)&&_0x33fb37['close']();return;}}!handleTrojanConnection(_0x33fb37,_0x295124)&&_0x33fb37[_0x909e7f(0x12c)]();})['on'](_0x4b3932(0x183),()=>{});});const getDownloadUrl=()=>{const _0x246d4f=_0x3a0b35,_0x49e68f=os[_0x246d4f(0x18b)]();return _0x49e68f===_0x246d4f(0x15e)||_0x49e68f===_0x246d4f(0x181)||_0x49e68f==='aarch64'?!NEZHA_PORT?_0x246d4f(0x180):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x17a08e=_0x3a0b35;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4ec882=getDownloadUrl(),_0x4dde07=await axios({'method':_0x17a08e(0x15f),'url':_0x4ec882,'responseType':_0x17a08e(0x185)}),_0x330d29=fs[_0x17a08e(0x143)](_0x17a08e(0x192));return _0x4dde07[_0x17a08e(0x169)][_0x17a08e(0x168)](_0x330d29),new Promise((_0x38068f,_0x50e210)=>{const _0x3334b1=_0x17a08e;_0x330d29['on'](_0x3334b1(0x142),()=>{const _0x14c745=_0x3334b1;console[_0x14c745(0x139)](_0x14c745(0x158)),exec(_0x14c745(0x159),_0x224bae=>{if(_0x224bae)_0x50e210(_0x224bae);_0x38068f();});}),_0x330d29['on']('error',_0x50e210);});}catch(_0x3754c0){throw _0x3754c0;}},runnz=async()=>{const _0x18abbd=_0x3a0b35;try{const _0x157981=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x18abbd(0x16c)});if(_0x157981[_0x18abbd(0x165)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x255f74){}await downloadFile();let _0x33fb86='',_0x14d16a=[_0x18abbd(0x151),_0x18abbd(0x128),_0x18abbd(0x18a),'2087',_0x18abbd(0x197),_0x18abbd(0x19b)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1c3a72=_0x14d16a[_0x18abbd(0x195)](NEZHA_PORT)?'--tls':'';_0x33fb86=_0x18abbd(0x179)+NEZHA_SERVER+':'+NEZHA_PORT+_0x18abbd(0x18c)+NEZHA_KEY+'\x20'+_0x1c3a72+_0x18abbd(0x125);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5647d1=NEZHA_SERVER[_0x18abbd(0x195)](':')?NEZHA_SERVER['split'](':')[_0x18abbd(0x164)]():'',_0x1dd622=_0x14d16a['includes'](_0x5647d1)?_0x18abbd(0x193):_0x18abbd(0x167),_0x23d377=_0x18abbd(0x161)+NEZHA_KEY+_0x18abbd(0x156)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x1dd622+_0x18abbd(0x127)+UUID;fs[_0x18abbd(0x133)]('config.yaml',_0x23d377);}_0x33fb86=_0x18abbd(0x15b);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x33fb86,{'shell':_0x18abbd(0x14d)},_0x4a4db0=>{const _0x7d009f=_0x18abbd;if(_0x4a4db0)console[_0x7d009f(0x183)](_0x7d009f(0x191),_0x4a4db0);else console[_0x7d009f(0x139)](_0x7d009f(0x188));});}catch(_0x325ba1){console[_0x18abbd(0x183)]('error:\x20'+_0x325ba1);}};async function addAccessTask(){const _0x13526f=_0x3a0b35;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xea44a7=_0x13526f(0x14c)+DOMAIN;try{const _0x10f966=await axios[_0x13526f(0x15d)](_0x13526f(0x130),{'url':_0xea44a7},{'headers':{'Content-Type':_0x13526f(0x136)}});console[_0x13526f(0x139)](_0x13526f(0x132));}catch(_0x18d940){}}const delFiles=()=>{const _0xb2d29=_0x3a0b35;fs['unlink']('npm',()=>{}),fs[_0xb2d29(0x154)](_0xb2d29(0x18d),()=>{});};httpServer[_0x3a0b35(0x162)](PORT,()=>{const _0x35a6ff=_0x3a0b35;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x35a6ff(0x139)](_0x35a6ff(0x137)+PORT);});
